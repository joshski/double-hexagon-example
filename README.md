# double-hexagon-example

An example of a design pattern I like to call the "double hexagon". Inspired by
the [hexagonal architecture](http://alistair.cockburn.us/Hexagonal+architecture)
the double hexagon involves running the exact same tests against the application
domain logic and the external user interface. Using ports and adapters in both
the test and application code means two hexagons are in use, one for the tests
and one for the application code.

[@aslakhellesoy](https://github.com/aslakhellesoy) taught me how to do this.

## Understanding the code

The [app test](./test/appTest.js) runs the same two simple test cases against
both the [Account domain object](./lib/domain/account.js) and the
[HTTP API](./lib/web/server/bankRoutes.js) by enumerating two different
configurations generated by [factories](./test/support/appFactories.js).

Further app configurations would be enumerated if there were alternative
implementations of the
[account store](./lib/stores/accounts/memoryAccountStore.js) and the
[contract tests](./test/accountStoreTest.js) would ensure the alternatives
behaved just like the memory implementation.
